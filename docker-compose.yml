services:
  wendui:
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "7860:7860"
    environment:
      ENV: production
      DEBUG: "false"
      LOG_LEVEL: INFO
      CORS_ORIGINS: '["*"]'
      DB_URL: "sqlite:///./data/app.db"
      AI_DEBUG_LOG_PATH: "reports/ai-debug.jsonl"
      SECRET_KEY: "${SECRET_KEY:-change-me}"
      PROVIDERS: "${PROVIDERS:-[{\"host\":\"openai\",\"base_url\":\"https://api.openai.com/v1\",\"api_key_env\":\"OPENAI_API_KEY\",\"models\":[{\"id\":\"gpt-5.2-2025-12-11\",\"name\":\"GPT-5.2\"}]}]}"
      OPENAI_API_KEY: "${OPENAI_API_KEY:-}"
      MINIMAX_API_KEY: "${MINIMAX_API_KEY:-}"
    volumes:
      - wendui-data:/app/backend/data
      - wendui-reports:/app/backend/reports
    restart: unless-stopped

volumes:
  wendui-data:
  wendui-reports:
